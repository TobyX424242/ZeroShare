name = "secure-share"
main = "src/index.js"
compatibility_date = "2024-11-21"

# R2 Bucket Binding
[[r2_buckets]]
binding = "FILES_BUCKET"
bucket_name = "secure-share-files"

# Workers KV for metadata
[[kv_namespaces]]
binding = "METADATA_KV"
id = "xxxxxxxxxxxxxxxxxxx"
preview_id = "xxxxxxxxxxxxxxxxxxx"

# Environment Variables
[vars]
MAX_FILE_SIZE = 104857600  # 100MB
MAX_RETENTION_HOURS = 24
MAX_VIEWS_LIMIT = 50       # Maximum allowed views before forced deletion

# Cron trigger that runs the scheduled cleanup worker.
# Adjust the frequency as needed (example below runs every 30 minutes).
[triggers]
crons = ["*/30 * * * *"]

# Static Assets (Optional, if we want to serve static files from a directory)
# [site]
# bucket = "./public"
